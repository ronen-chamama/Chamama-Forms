{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/chamama-forms/lib/firebaseClient.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\r\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\r\nimport { getFirestore, connectFirestoreEmulator } from \"firebase/firestore\";\r\nimport { getStorage, connectStorageEmulator } from \"firebase/storage\";\r\nimport { getFunctions, connectFunctionsEmulator } from \"firebase/functions\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FB_API_KEY!,\r\n  authDomain: process.env.NEXT_PUBLIC_FB_AUTH_DOMAIN!,\r\n  projectId: process.env.NEXT_PUBLIC_FB_PROJECT_ID!,\r\n  storageBucket: process.env.NEXT_PUBLIC_FB_STORAGE_BUCKET!,\r\n  appId: process.env.NEXT_PUBLIC_FB_APP_ID!,\r\n};\r\n\r\nexport const app = getApps().length ? getApp() : initializeApp(firebaseConfig);\r\n\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport const storage = getStorage(app);\r\n// חשוב: אזור תואם ל-export של הפונקציה\r\nexport const functions = getFunctions(app, \"us-central1\");\r\n\r\n// חיבור אמולטורים לוקאלית\r\nif (typeof window !== \"undefined\" && location.hostname === \"localhost\") {\r\n  connectAuthEmulator(auth, \"http://127.0.0.1:9099\");\r\n  connectFirestoreEmulator(db, \"127.0.0.1\", 8080);\r\n  connectStorageEmulator(storage, \"127.0.0.1\", 9199);\r\n  connectFunctionsEmulator(functions, \"127.0.0.1\", 5001);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAOU;AAPV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,KAAK;AACP;AAEO,MAAM,MAAM,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,6KAAM,MAAK,IAAA,oLAAa,EAAC;AAExD,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC;AAE3B,MAAM,YAAY,IAAA,yLAAY,EAAC,KAAK;AAE3C,0BAA0B;AAC1B,IAAI,aAAkB,eAAe,SAAS,QAAQ,KAAK,aAAa;IACtE,IAAA,oLAAmB,EAAC,MAAM;IAC1B,IAAA,8LAAwB,EAAC,IAAI,aAAa;IAC1C,IAAA,0LAAsB,EAAC,SAAS,aAAa;IAC7C,IAAA,qMAAwB,EAAC,WAAW,aAAa;AACnD","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/chamama-forms/app/app/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { auth, db } from \"@/lib/firebaseClient\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { collection, query, where, getDocs, addDoc, serverTimestamp } from \"firebase/firestore\";\r\n\r\nexport default function AppHome() {\r\n  const [uid,setUid]=useState<string>(\"\"); const [forms,setForms]=useState<any[]>([]);\r\n  useEffect(()=>{ const u=onAuthStateChanged(auth,(x)=>{ if(!x) location.href=\"/login\"; else setUid(x.uid); }); return ()=>u();},[]);\r\n  useEffect(()=>{ if(!uid) return; (async()=>{\r\n    const q=query(collection(db,\"forms\"), where(\"ownerUid\",\"==\",uid));\r\n    const snap=await getDocs(q); setForms(snap.docs.map(d=>({id:d.id,...d.data()})));\r\n  })(); },[uid]);\r\n\r\n  function copyLink(id: string) {\r\n  const url = `${location.origin}/f/${id}`;\r\n  navigator.clipboard.writeText(url).then(() => alert(\"קישור הועתק\"));\r\n}\r\n  async function createNew(){\r\n    const docRef=await addDoc(collection(db,\"forms\"),{\r\n      ownerUid: uid, title: \"טופס חדש\", targetGroups: [], notifyStaffEmails: [],\r\n      schema: [], createdAt: serverTimestamp(), updatedAt: serverTimestamp()\r\n    });\r\n    location.href=`/app/forms/${docRef.id}/edit`;\r\n  }\r\n\r\n  return (\r\n    <main dir=\"rtl\" className=\"p-6 max-w-3xl mx-auto\">\r\n      <h1 className=\"text-2xl mb-4\">הטפסים שלי</h1>\r\n      <button className=\"border p-2 mb-4\" onClick={createNew}>+ טופס חדש</button>\r\n      <ul className=\"space-y-2\">\r\n        {forms.map(f=>(\r\n          <li key={f.id} className=\"border p-2 rounded flex justify-between\">\r\n            <div>{f.title}</div>\r\n            <div className=\"flex items-center gap-3\">\r\n  <a className=\"underline\" href={`/app/forms/${f.id}/edit`}>עריכה</a>\r\n  {/* הסר/י קישור להגשות */}\r\n  <button type=\"button\" className=\"underline\" onClick={() => copyLink(f.id)}>\r\n    העתק קישור להורה\r\n  </button>\r\n  <span className=\"text-xs text-gray-500\">נשלחו: {f.submissionCount || 0}</span>\r\n</div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,KAAI,OAAO,GAAC,IAAA,yKAAQ,EAAS;IAAK,MAAM,CAAC,OAAM,SAAS,GAAC,IAAA,yKAAQ,EAAQ,EAAE;IAClF,IAAA,0KAAS;6BAAC;YAAM,MAAM,IAAE,IAAA,mLAAkB,EAAC,gIAAI;uCAAC,CAAC;oBAAM,IAAG,CAAC,GAAG,SAAS,IAAI,GAAC;yBAAe,OAAO,EAAE,GAAG;gBAAG;;YAAI;qCAAO,IAAI;;QAAI;4BAAE,EAAE;IACjI,IAAA,0KAAS;6BAAC;YAAM,IAAG,CAAC,KAAK;YAAQ;qCAAC;oBAChC,MAAM,IAAE,IAAA,2KAAK,EAAC,AADiB,IACjB,gLAAU,AAEzB,EAF0B,8HAAE,EAAC,UAAU,IAAA,2KAAK,EAAC,YAAW,MAAK;oBAC5D,MAAM,OAAK,MAAM,IAAA,6KAAO,EAAC;oBAAI,SAAS,KAAK,IAAI,CAAC,GAAG;6CAAC,CAAA,IAAG,CAAC;gCAAC,IAAG,EAAE,EAAE;gCAAC,GAAG,EAAE,IAAI,EAAE;4BAAA,CAAC;;gBAC/E;;QAAM;4BAAE;QAAC;KAAI;IAEb,SAAS,SAAS,EAAU;QAC5B,MAAM,MAAM,AAAC,GAAuB,OAArB,SAAS,MAAM,EAAC,OAAQ,OAAH;QACpC,UAAU,SAAS,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,IAAM,MAAM;IACtD;IACE,eAAe;QACb,MAAM,SAAO,MAAM,IAAA,4KAAM,EAAC,IAAA,gLAAU,EAAC,8HAAE,EAAC,UAAS;YAC/C,UAAU;YAAK,OAAO;YAAY,cAAc,EAAE;YAAE,mBAAmB,EAAE;YACzE,QAAQ,EAAE;YAAE,WAAW,IAAA,qLAAe;YAAI,WAAW,IAAA,qLAAe;QACtE;QACA,SAAS,IAAI,GAAC,AAAC,cAAuB,OAAV,OAAO,EAAE,EAAC;IACxC;IAEA,qBACE,6LAAC;QAAK,KAAI;QAAM,WAAU;;0BACxB,6LAAC;gBAAG,WAAU;0BAAgB;;;;;;0BAC9B,6LAAC;gBAAO,WAAU;gBAAkB,SAAS;0BAAW;;;;;;0BACxD,6LAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAA,kBACT,6LAAC;wBAAc,WAAU;;0CACvB,6LAAC;0CAAK,EAAE,KAAK;;;;;;0CACb,6LAAC;gCAAI,WAAU;;kDACzB,6LAAC;wCAAE,WAAU;wCAAY,MAAM,AAAC,cAAkB,OAAL,EAAE,EAAE,EAAC;kDAAQ;;;;;;kDAE1D,6LAAC;wCAAO,MAAK;wCAAS,WAAU;wCAAY,SAAS,IAAM,SAAS,EAAE,EAAE;kDAAG;;;;;;kDAG3E,6LAAC;wCAAK,WAAU;;4CAAwB;4CAAQ,EAAE,eAAe,IAAI;;;;;;;;;;;;;;uBARpD,EAAE,EAAE;;;;;;;;;;;;;;;;AAevB;GAzCwB;KAAA","debugId":null}}]
}