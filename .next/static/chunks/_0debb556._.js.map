{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/chamama-forms/lib/firebaseClient.ts"],"sourcesContent":["// lib/firebaseClient.ts\r\nimport { initializeApp, getApps, type FirebaseApp } from \"firebase/app\";\r\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\r\nimport { getFirestore, connectFirestoreEmulator } from \"firebase/firestore\";\r\nimport { getStorage, connectStorageEmulator } from \"firebase/storage\";\r\nimport { getFunctions, connectFunctionsEmulator } from \"firebase/functions\";\r\n\r\n// --- אבחון: ודא שמשתני הסביבה קיימים (גם בשרת של Next וגם בדפדפן) ---\r\nconst cfg = {\r\n  apiKey: process.env.NEXT_PUBLIC_FB_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FB_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FB_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FB_STORAGE_BUCKET,\r\n  appId: process.env.NEXT_PUBLIC_FB_APP_ID,\r\n};\r\n\r\n// נבדוק את כל המפתחות החיוניים ונזרוק שגיאה ברורה אם חסר משהו:\r\nconst missing = Object.entries(cfg).filter(([_, v]) => !v).map(([k]) => k);\r\nif (missing.length) {\r\n  // חשוב: ההודעה תופיע במסוף וגם תעצור את הייבוא בצורה ברורה\r\n  throw new Error(\r\n    \"Firebase env missing: \" + missing.join(\", \") +\r\n    \". ודא שיש קובץ .env.local בשורש הפרויקט עם NEXT_PUBLIC_FB_* אמיתיים, ואתחל מחדש את dev.\"\r\n  );\r\n}\r\n\r\nconst firebaseConfig = cfg as {\r\n  apiKey: string; authDomain: string; projectId: string; storageBucket: string; appId: string;\r\n};\r\n\r\nlet app: FirebaseApp;\r\ntry {\r\n  app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);\r\n} catch (e) {\r\n  // לוג מועיל לאבחון\r\n  // eslint-disable-next-line no-console\r\n  console.error(\"Firebase initializeApp failed. projectId:\", firebaseConfig.projectId, e);\r\n  throw e;\r\n}\r\n\r\nexport { app };\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport const storage = getStorage(app);\r\nexport const functions = getFunctions(app);\r\n\r\n\r\n// חיבור לאמולטורים בלוקאל\r\nif (typeof window !== \"undefined\" && location.hostname === \"localhost\") {\r\n  try { connectAuthEmulator(auth, \"http://localhost:9099\"); } catch {}\r\n  try { connectFirestoreEmulator(db, \"localhost\", 8080); } catch {}\r\n  try { connectStorageEmulator(storage, \"localhost\", 9199); } catch {}\r\n  try { connectFunctionsEmulator(functions, \"localhost\", 5001); } catch {}\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;;;;;;;;AASd;AARV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAEA,uEAAuE;AACvE,MAAM,MAAM;IACV,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,KAAK;AACP;AAEA,+DAA+D;AAC/D,MAAM,UAAU,OAAO,OAAO,CAAC,KAAK,MAAM,CAAC;QAAC,CAAC,GAAG,EAAE;WAAK,CAAC;GAAG,GAAG,CAAC;QAAC,CAAC,EAAE;WAAK;;AACxE,IAAI,QAAQ,MAAM,EAAE;IAClB,2DAA2D;IAC3D,MAAM,IAAI,MACR,2BAA2B,QAAQ,IAAI,CAAC,QACxC;AAEJ;AAEA,MAAM,iBAAiB;AAIvB,IAAI;AACJ,IAAI;IACF,MAAM,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,8KAAO,GAAE,CAAC,EAAE,GAAG,IAAA,oLAAa,EAAC;AACxD,EAAE,OAAO,GAAG;IACV,mBAAmB;IACnB,sCAAsC;IACtC,QAAQ,KAAK,CAAC,6CAA6C,eAAe,SAAS,EAAE;IACrF,MAAM;AACR;;AAGO,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC;AAC3B,MAAM,YAAY,IAAA,yLAAY,EAAC;AAGtC,0BAA0B;AAC1B,IAAI,aAAkB,eAAe,SAAS,QAAQ,KAAK,aAAa;IACtE,IAAI;QAAE,IAAA,oLAAmB,EAAC,MAAM;IAA0B,EAAE,UAAM,CAAC;IACnE,IAAI;QAAE,IAAA,8LAAwB,EAAC,IAAI,aAAa;IAAO,EAAE,UAAM,CAAC;IAChE,IAAI;QAAE,IAAA,0LAAsB,EAAC,SAAS,aAAa;IAAO,EAAE,UAAM,CAAC;IACnE,IAAI;QAAE,IAAA,qMAAwB,EAAC,WAAW,aAAa;IAAO,EAAE,UAAM,CAAC;AACzE","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///C:/chamama-forms/app/app/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { auth, db } from \"@/lib/firebaseClient\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\r\n\r\nexport default function AppHome() {\r\n  const [uid, setUid] = useState<string>(\"\");\r\n  const [forms, setForms] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, (u) => {\r\n      if (!u) location.href = \"/login\";\r\n      else setUid(u.uid);\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!uid) return;\r\n    (async () => {\r\n      const qy = query(collection(db, \"forms\"), where(\"ownerUid\", \"==\", uid));\r\n      const snap = await getDocs(qy);\r\n      setForms(snap.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n    })();\r\n  }, [uid]);\r\n\r\n  return (\r\n    <main dir=\"rtl\" className=\"p-6 max-w-3xl mx-auto\">\r\n      <h1 className=\"text-2xl mb-4\">הטפסים שלי</h1>\r\n      <a className=\"border p-2 inline-block mb-4\" href=\"/app/forms/new\">+ טופס חדש</a>\r\n      <ul className=\"space-y-2\">\r\n        {forms.map((f) => (\r\n          <li key={f.id} className=\"border p-2 rounded flex justify-between\">\r\n            <div>{f.title || \"ללא כותרת\"}</div>\r\n            <div className=\"space-x-2 space-x-reverse\">\r\n              <a className=\"underline\" href={`/app/forms/${f.id}/edit`}>עריכה</a>\r\n              <a className=\"underline\" href={`/app/forms/${f.id}/submissions`}>הגשות</a>\r\n              <a className=\"underline\" href={`/f/${f.id}`}>קישור להורה</a>\r\n            </div>\r\n          </li>\r\n        ))}\r\n        {forms.length === 0 && <li className=\"text-sm text-gray-500\">אין טפסים עדיין.</li>}\r\n      </ul>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;;;AAJA;;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAS;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAE5C,IAAA,0KAAS;6BAAC;YACR,MAAM,QAAQ,IAAA,mLAAkB,EAAC,gIAAI;2CAAE,CAAC;oBACtC,IAAI,CAAC,GAAG,SAAS,IAAI,GAAG;yBACnB,OAAO,EAAE,GAAG;gBACnB;;YACA;qCAAO,IAAM;;QACf;4BAAG,EAAE;IAEL,IAAA,0KAAS;6BAAC;YACR,IAAI,CAAC,KAAK;YACV;qCAAC;oBACC,MAAM,KAAK,IAAA,2KAAK,EAAC,AADnB,IACmB,gLAAU,AAG5B,EAH6B,8HAAE,EAAE,UAAU,IAAA,2KAAK,EAAC,YAAY,MAAM;oBAClE,MAAM,OAAO,MAAM,IAAA,6KAAO,EAAC;oBAC3B,SAAS,KAAK,IAAI,CAAC,GAAG;6CAAC,CAAC,IAAM,CAAC;gCAAE,IAAI,EAAE,EAAE;gCAAE,GAAG,EAAE,IAAI,EAAE;4BAAC,CAAC;;gBAC1D;;QACF;4BAAG;QAAC;KAAI;IAER,qBACE,6LAAC;QAAK,KAAI;QAAM,WAAU;;0BACxB,6LAAC;gBAAG,WAAU;0BAAgB;;;;;;0BAC9B,6LAAC;gBAAE,WAAU;gBAA+B,MAAK;0BAAiB;;;;;;0BAClE,6LAAC;gBAAG,WAAU;;oBACX,MAAM,GAAG,CAAC,CAAC,kBACV,6LAAC;4BAAc,WAAU;;8CACvB,6LAAC;8CAAK,EAAE,KAAK,IAAI;;;;;;8CACjB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;4CAAY,MAAM,AAAC,cAAkB,OAAL,EAAE,EAAE,EAAC;sDAAQ;;;;;;sDAC1D,6LAAC;4CAAE,WAAU;4CAAY,MAAM,AAAC,cAAkB,OAAL,EAAE,EAAE,EAAC;sDAAe;;;;;;sDACjE,6LAAC;4CAAE,WAAU;4CAAY,MAAM,AAAC,MAAU,OAAL,EAAE,EAAE;sDAAI;;;;;;;;;;;;;2BALxC,EAAE,EAAE;;;;;oBASd,MAAM,MAAM,KAAK,mBAAK,6LAAC;wBAAG,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;AAIrE;GAxCwB;KAAA","debugId":null}}]
}