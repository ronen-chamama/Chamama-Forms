{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/chamama-forms/lib/firebaseClient.ts"],"sourcesContent":["// lib/firebaseClient.ts\r\nimport { initializeApp, getApps, type FirebaseApp } from \"firebase/app\";\r\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\r\nimport { getFirestore, connectFirestoreEmulator } from \"firebase/firestore\";\r\nimport { getStorage, connectStorageEmulator } from \"firebase/storage\";\r\nimport { getFunctions, connectFunctionsEmulator } from \"firebase/functions\";\r\n\r\n// --- אבחון: ודא שמשתני הסביבה קיימים (גם בשרת של Next וגם בדפדפן) ---\r\nconst cfg = {\r\n  apiKey: process.env.NEXT_PUBLIC_FB_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FB_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FB_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FB_STORAGE_BUCKET,\r\n  appId: process.env.NEXT_PUBLIC_FB_APP_ID,\r\n};\r\n\r\n// נבדוק את כל המפתחות החיוניים ונזרוק שגיאה ברורה אם חסר משהו:\r\nconst missing = Object.entries(cfg).filter(([_, v]) => !v).map(([k]) => k);\r\nif (missing.length) {\r\n  // חשוב: ההודעה תופיע במסוף וגם תעצור את הייבוא בצורה ברורה\r\n  throw new Error(\r\n    \"Firebase env missing: \" + missing.join(\", \") +\r\n    \". ודא שיש קובץ .env.local בשורש הפרויקט עם NEXT_PUBLIC_FB_* אמיתיים, ואתחל מחדש את dev.\"\r\n  );\r\n}\r\n\r\nconst firebaseConfig = cfg as {\r\n  apiKey: string; authDomain: string; projectId: string; storageBucket: string; appId: string;\r\n};\r\n\r\nlet app: FirebaseApp;\r\ntry {\r\n  app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);\r\n} catch (e) {\r\n  // לוג מועיל לאבחון\r\n  // eslint-disable-next-line no-console\r\n  console.error(\"Firebase initializeApp failed. projectId:\", firebaseConfig.projectId, e);\r\n  throw e;\r\n}\r\n\r\nexport { app };\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport const storage = getStorage(app);\r\nexport const functions = getFunctions(app);\r\n\r\n\r\n// חיבור לאמולטורים בלוקאל\r\nif (typeof window !== \"undefined\" && location.hostname === \"localhost\") {\r\n  try { connectAuthEmulator(auth, \"http://localhost:9099\"); } catch {}\r\n  try { connectFirestoreEmulator(db, \"localhost\", 8080); } catch {}\r\n  try { connectStorageEmulator(storage, \"localhost\", 9199); } catch {}\r\n  try { connectFunctionsEmulator(functions, \"localhost\", 5001); } catch {}\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;;;;;;;;AASd;AARV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAEA,uEAAuE;AACvE,MAAM,MAAM;IACV,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,KAAK;AACP;AAEA,+DAA+D;AAC/D,MAAM,UAAU,OAAO,OAAO,CAAC,KAAK,MAAM,CAAC;QAAC,CAAC,GAAG,EAAE;WAAK,CAAC;GAAG,GAAG,CAAC;QAAC,CAAC,EAAE;WAAK;;AACxE,IAAI,QAAQ,MAAM,EAAE;IAClB,2DAA2D;IAC3D,MAAM,IAAI,MACR,2BAA2B,QAAQ,IAAI,CAAC,QACxC;AAEJ;AAEA,MAAM,iBAAiB;AAIvB,IAAI;AACJ,IAAI;IACF,MAAM,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,8KAAO,GAAE,CAAC,EAAE,GAAG,IAAA,oLAAa,EAAC;AACxD,EAAE,OAAO,GAAG;IACV,mBAAmB;IACnB,sCAAsC;IACtC,QAAQ,KAAK,CAAC,6CAA6C,eAAe,SAAS,EAAE;IACrF,MAAM;AACR;;AAGO,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC;AAC3B,MAAM,YAAY,IAAA,yLAAY,EAAC;AAGtC,0BAA0B;AAC1B,IAAI,aAAkB,eAAe,SAAS,QAAQ,KAAK,aAAa;IACtE,IAAI;QAAE,IAAA,oLAAmB,EAAC,MAAM;IAA0B,EAAE,UAAM,CAAC;IACnE,IAAI;QAAE,IAAA,8LAAwB,EAAC,IAAI,aAAa;IAAO,EAAE,UAAM,CAAC;IAChE,IAAI;QAAE,IAAA,0LAAsB,EAAC,SAAS,aAAa;IAAO,EAAE,UAAM,CAAC;IACnE,IAAI;QAAE,IAAA,qMAAwB,EAAC,WAAW,aAAa;IAAO,EAAE,UAAM,CAAC;AACzE","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///C:/chamama-forms/app/app/forms/%5Bid%5D/submissions/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { auth, db } from \"@/lib/firebaseClient\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { functions } from \"@/lib/firebaseClient\";\r\nimport { httpsCallable } from \"firebase/functions\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  orderBy,\r\n  query,\r\n  Timestamp,\r\n} from \"firebase/firestore\";\r\n\r\ntype Field = {\r\n  id: string;\r\n  type: \"richtext\" | \"text\" | \"phone\" | \"email\" | \"select\" | \"radio\" | \"checkbox\" | \"signature\";\r\n  label: string;\r\n  options?: string[];\r\n  required?: boolean;\r\n};\r\n\r\ntype Submission = {\r\n  id: string;\r\n  submittedAt?: Timestamp | { seconds: number; nanoseconds: number } | null;\r\n  answers?: Record<string, any>;\r\n  signatureUrl?: string;\r\n  pdfUrl?: string;\r\n  status?: string;\r\n};\r\n\r\nfunction toDate(ts: any): Date | null {\r\n  if (!ts) return null;\r\n  if (ts instanceof Date) return ts;\r\n  if (ts?.toDate) return ts.toDate();\r\n  if (typeof ts?.seconds === \"number\") return new Date(ts.seconds * 1000);\r\n  return null;\r\n}\r\n\r\nfunction formatDate(d?: Date | null) {\r\n  if (!d) return \"-\";\r\n  try {\r\n    return d.toLocaleString(\"he-IL\", { dateStyle: \"short\", timeStyle: \"short\" });\r\n  } catch {\r\n    return d.toISOString();\r\n  }\r\n}\r\n\r\n// הופך ערך גולמי לייצוג קריא לפי סוג שדה\r\nfunction prettyValue(field: Field | undefined, value: any): string {\r\n  if (value == null) return \"\";\r\n  if (!field) {\r\n    // אם אין לנו מידע על השדה (למקרה קצה) – החזר טקסט\r\n    if (Array.isArray(value)) return value.join(\", \");\r\n    return typeof value === \"object\" ? JSON.stringify(value) : String(value);\r\n  }\r\n\r\n  switch (field.type) {\r\n    case \"checkbox\":\r\n      return Array.isArray(value) ? value.join(\", \") : String(value);\r\n    case \"richtext\":\r\n      // הפשטה קצרה של HTML → טקסט\r\n      return String(value).replace(/<[^>]+>/g, \"\").trim();\r\n    default:\r\n      return Array.isArray(value) ? value.join(\", \") : String(value);\r\n  }\r\n}\r\n\r\nexport default function SubmissionsPage() {\r\n  const { id: formId } = useParams<{ id: string }>();\r\n  const [uid, setUid] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [items, setItems] = useState<Submission[]>([]);\r\n  const [schema, setSchema] = useState<Field[]>([]);\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [selected, setSelected] = useState<Submission | null>(null);\r\n\r\n  // התחברות חובה\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, (u) => {\r\n      if (!u) location.href = \"/login\";\r\n      else setUid(u.uid);\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  // טען את ה-schema של הטופס + ההגשות\r\n  useEffect(() => {\r\n    if (!uid) return;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        // 1) טען טופס (לצורך schema → id→label)\r\n        const f = await getDoc(doc(db, \"forms\", formId));\r\n        const data = f.data() as any;\r\n        const formSchema: Field[] = (data?.schema || []) as Field[];\r\n        setSchema(formSchema);\r\n\r\n        // 2) טען הגשות\r\n        const q = query(\r\n          collection(db, \"forms\", formId, \"submissions\"),\r\n          orderBy(\"submittedAt\", \"desc\")\r\n        );\r\n        const snap = await getDocs(q);\r\n        const arr: Submission[] = snap.docs.map((d) => ({\r\n          id: d.id,\r\n          ...(d.data() as any),\r\n        }));\r\n        setItems(arr);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [uid, formId]);\r\n\r\n  // מיפוי מהיר של fieldId → Field (לשימוש בהצגה)\r\n  const fieldById = useMemo(() => {\r\n    const map = new Map<string, Field>();\r\n    schema.forEach((f) => map.set(f.id, f));\r\n    return map;\r\n  }, [schema]);\r\n\r\n  // טקסט חיפוש: מחפש בתוך \"שם שדה: ערך\" מאוחד\r\n  const filtered = useMemo(() => {\r\n    if (!filter.trim()) return items;\r\n    const f = filter.trim().toLowerCase();\r\n    return items.filter((s) => {\r\n      const parts: string[] = [];\r\n      const answers = s.answers || {};\r\n      for (const [fid, val] of Object.entries(answers)) {\r\n        const field = fieldById.get(fid);\r\n        const label = field?.label || fid;\r\n        const pretty = prettyValue(field, val);\r\n        parts.push(`${label}: ${pretty}`);\r\n      }\r\n      return parts.join(\" | \").toLowerCase().includes(f);\r\n    });\r\n  }, [items, filter, fieldById]);\r\n\r\n  const [making, setMaking] = useState<string | null>(null);\r\n\r\nasync function makePdfFor(submissionId: string) {\r\n  try {\r\n    setMaking(submissionId);\r\n    const fn = httpsCallable(functions, \"makePdf\");\r\n    const res: any = await fn({ formId, submissionId });\r\n    // אפשר לעדכן את השורה בטבלה אם תרצה למשוך שוב או פשוט לתת רענון קל:\r\n    // location.reload();\r\n  } catch (e:any) {\r\n    alert(\"שגיאה ביצירת PDF: \" + (e?.message || e));\r\n  } finally {\r\n    setMaking(null);\r\n  }\r\n}\r\n\r\n  // ייצוא CSV: מייצר עמודות לפי ה-schema (Labels) כדי לקבל \"שם השדה: הערך\"\r\n  function exportCSV() {\r\n    // עמודות קבועות\r\n    const fixedHeaders = [\"id\", \"submittedAt\", \"status\", \"signatureUrl\", \"pdfUrl\"];\r\n    // עמודות דינמיות לפי סדר ה-schema\r\n    const dynamicHeaders = schema.map((f) => f.label);\r\n    const header = [...fixedHeaders, ...dynamicHeaders];\r\n\r\n    const rows = filtered.map((s) => {\r\n      const fixed = [\r\n        s.id,\r\n        formatDate(toDate(s.submittedAt)),\r\n        s.status || \"\",\r\n        s.signatureUrl || \"\",\r\n        s.pdfUrl || \"\",\r\n      ];\r\n      const answers = s.answers || {};\r\n      const dynamic = schema.map((f) => prettyValue(f, answers[f.id]));\r\n      return [...fixed, ...dynamic];\r\n    });\r\n\r\n    const csv =\r\n      header.join(\",\") +\r\n      \"\\n\" +\r\n      rows\r\n        .map((r) =>\r\n          r\r\n            .map((cell) => {\r\n              const str = String(cell ?? \"\");\r\n              if (str.includes(\",\") || str.includes(\"\\n\") || str.includes('\"')) {\r\n                return `\"${str.replace(/\"/g, '\"\"')}\"`;\r\n              }\r\n              return str;\r\n            })\r\n            .join(\",\")\r\n        )\r\n        .join(\"\\n\");\r\n\r\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    const stamp = new Date().toISOString().slice(0, 19).replace(/[:T]/g, \"-\");\r\n    a.download = `submissions-${formId}-${stamp}.csv`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  }\r\n\r\n  return (\r\n    <main dir=\"rtl\" className=\"p-6 max-w-6xl mx-auto\">\r\n      <div className=\"flex items-center justify-between gap-3 mb-4\">\r\n        <h1 className=\"text-2xl font-semibold\">הגשות לטופס</h1>\r\n        <div className=\"flex items-center gap-2\">\r\n          <input\r\n            className=\"border p-2 rounded w-64\"\r\n            placeholder=\"חיפוש לפי שם שדה או ערך…\"\r\n            value={filter}\r\n            onChange={(e) => setFilter(e.target.value)}\r\n          />\r\n          <button onClick={exportCSV} className=\"border p-2 rounded\">\r\n            ייצוא CSV\r\n          </button>\r\n          <a href={`/app/forms/${formId}/edit`} className=\"border p-2 rounded\">\r\n            חזרה לעריכה\r\n          </a>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div>טוען…</div>\r\n      ) : filtered.length === 0 ? (\r\n        <div>אין הגשות עדיין.</div>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {filtered.map((s) => {\r\n            const date = formatDate(toDate(s.submittedAt));\r\n            const answers = s.answers || {};\r\n            return (\r\n              <div key={s.id} className=\"border rounded p-3 bg-white\">\r\n                <div className=\"flex flex-wrap items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-gray-600\">\r\n                    נשלח: {date} | סטטוס: {s.status || \"-\"}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {s.signatureUrl ? (\r\n                      <a href={s.signatureUrl} target=\"_blank\" className=\"underline\">\r\n                        חתימה\r\n                      </a>\r\n                    ) : (\r\n                      <span className=\"text-gray-400\">אין חתימה</span>\r\n                    )}\r\n                    { s.pdfUrl ? (\r\n  <a href={s.pdfUrl} target=\"_blank\" className=\"underline\">PDF</a>\r\n) : (\r\n  <button\r\n    onClick={() => makePdfFor(s.id)}\r\n    className=\"border px-2 py-1 rounded\"\r\n    disabled={making === s.id}\r\n    title=\"הפק מסמך PDF רשמי\"\r\n  >\r\n    {making === s.id ? \"יוצר…\" : \"הפק PDF\"}\r\n  </button>\r\n)}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-3 grid sm:grid-cols-2 lg:grid-cols-3 gap-2\">\r\n                  {schema.map((f) => {\r\n                    const val = answers[f.id];\r\n                    const pv = prettyValue(f, val);\r\n                    // אל תציג שדה חתימה מתוך answers (החתימה מוצגת כקישור/תמונה למעלה)\r\n                    if (f.type === \"signature\") return null;\r\n                    return (\r\n                      <div key={f.id} className=\"border rounded p-2\">\r\n                        <div className=\"text-xs text-gray-600 mb-1\">{f.label}</div>\r\n                        <div className=\"text-sm break-words\">{pv || <span className=\"text-gray-400\">—</span>}</div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}