(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11663,52831,61978,t=>{"use strict";t.s(["auth",()=>O,"db",()=>A,"functions",()=>R,"storage",()=>N],11663),t.i(47167),t.i(14539);var e=t.i(76510);t.i(51718);var n=t.i(18357);t.i(36180);var r=t.i(98925);t.i(61086);var i=t.i(27215);t.s([],61978),t.s(["connectFunctionsEmulator",()=>C,"getFunctions",()=>k,"httpsCallable",()=>S],52831);var o=t.i(92953),a=t.i(97427),s=t.i(8070);function c(t,e){let n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function l(t){if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t)||!0===t||!1===t||"[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(t=>l(t));if("function"==typeof t||"object"==typeof t)return c(t,t=>l(t));throw Error("Data cannot be encoded in JSON: "+t)}function u(t){if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{let e=Number(t.value);if(isNaN(e))throw Error("Data cannot be decoded from JSON: "+t);return e}default:throw Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(t=>u(t)):"function"==typeof t||"object"==typeof t?c(t,t=>u(t)):t}let h="functions",d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class p extends a.FirebaseError{constructor(t,e,n){super("".concat(h,"/").concat(t),e||""),this.details=n,Object.setPrototypeOf(this,p.prototype)}}function f(t,e){let n,r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r;try{let t=e&&e.error;if(t){let e=t.status;if("string"==typeof e){if(!d[e])return new p("internal","internal");r=d[e],i=e}let o=t.message;"string"==typeof o&&(i=o),n=t.details,void 0!==n&&(n=u(n))}}catch(t){}return"ok"===r?null:new p(r,i,n)}class m{async getAuthToken(){if(this.auth)try{let t=await this.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(t){return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){let e=await this.getAuthToken();return{authToken:e,messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(t)}}constructor(t,e,n,r){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,o._isFirebaseServerApp)(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(t=>this.auth=t,()=>{}),this.messaging||n.get().then(t=>this.messaging=t,()=>{}),this.appCheck||null==r||r.get().then(t=>this.appCheck=t,()=>{})}}let g="us-central1",v=/^data: (.*?)(?:\n|$)/;class y{_delete(){return this.deleteService()}_url(t){let e=this.app.options.projectId;if(null!==this.emulatorOrigin){let n=this.emulatorOrigin;return"".concat(n,"/").concat(e,"/").concat(this.region,"/").concat(t)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(t):"https://".concat(this.region,"-").concat(e,".cloudfunctions.net/").concat(t)}constructor(t,e,n,r,i=g,o=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return fetch(...e)}){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new m(t,e,n,r),this.cancelAllRequests=new Promise(t=>{this.deleteService=()=>Promise.resolve(t())});try{let t=new URL(i);this.customDomain=t.origin+("/"===t.pathname?"":t.pathname),this.region=g}catch(t){this.customDomain=null,this.region=i}}}function _(t){return t.emulatorOrigin&&(0,a.isCloudWorkstation)(t.emulatorOrigin)?"include":void 0}async function w(t,e,n,r,i){let o;n["Content-Type"]="application/json";try{o=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:_(i)})}catch(t){return{status:0,json:null}}let a=null;try{a=await o.json()}catch(t){}return{status:o.status,json:a}}async function x(t,e){let n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function b(t,e,n,r){var i;let o,a={data:n=l(n)},s=await x(t,r),c=(i=r.timeout||7e4,o=null,{promise:new Promise((t,e)=>{o=setTimeout(()=>{e(new p("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{o&&clearTimeout(o)}}),h=await Promise.race([w(e,a,s,t.fetchImpl,t),c.promise,t.cancelAllRequests]);if(c.cancel(),!h)throw new p("cancelled","Firebase Functions instance was deleted.");let d=f(h.status,h.json);if(d)throw d;if(!h.json)throw new p("internal","Response is not valid JSON object.");let m=h.json.data;if(void 0===m&&(m=h.json.result),void 0===m)throw new p("internal","Response is missing data field.");return{data:u(m)}}async function P(t,e,n,r){var i;let o,a,s,c={data:n=l(n)},h=await x(t,r);h["Content-Type"]="application/json",h.Accept="text/event-stream";try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(c),headers:h,signal:null==r?void 0:r.signal,credentials:_(t)})}catch(e){if(e instanceof Error&&"AbortError"===e.name){let t=new p("cancelled","Request was cancelled.");return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}let t=f(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}let d=new Promise((t,e)=>{a=t,s=e});null==r||null==(i=r.signal)||i.addEventListener("abort",()=>{let t=new p("cancelled","Request was cancelled.");s(t)});let m=function(t,e,n,r){let i=(t,r)=>{let i=t.match(v);if(!i)return;let o=i[1];try{let t=JSON.parse(o);if("result"in t)return void e(u(t.result));if("message"in t)return void r.enqueue(u(t.message));if("error"in t){let e=f(0,t);r.error(e),n(e);return}}catch(t){if(t instanceof p){r.error(t),n(t);return}}},o=new TextDecoder;return new ReadableStream({start(e){let a="";return s();async function s(){if(null==r?void 0:r.aborted){let t=new p("cancelled","Request was cancelled");return e.error(t),n(t),Promise.resolve()}try{let{value:c,done:l}=await t.read();if(l){a.trim()&&i(a.trim(),e),e.close();return}if(null==r?void 0:r.aborted){let r=new p("cancelled","Request was cancelled");e.error(r),n(r),await t.cancel();return}let u=(a+=o.decode(c,{stream:!0})).split("\n");for(let t of(a=u.pop()||"",u))t.trim()&&i(t.trim(),e);return s()}catch(r){let t=r instanceof p?r:f(0,null);e.error(t),n(t)}}},cancel:()=>t.cancel()})}(o.body.getReader(),a,s,null==r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){let t=m.getReader();return{async next(){let{value:e,done:n}=await t.read();return{value:e,done:n}},return:async()=>(await t.cancel(),{done:!0,value:void 0})}}},data:d}}let E="@firebase/functions",T="0.13.1";function k(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.getApp)(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=(0,o._getProvider)((0,a.getModularInstance)(t),h).getImmediate({identifier:e}),r=(0,a.getDefaultEmulatorHostnameAndPort)("functions");return r&&C(n,...r),n}function C(t,e,n){var r=(0,a.getModularInstance)(t);let i=(0,a.isCloudWorkstation)(e);r.emulatorOrigin="http".concat(i?"s":"","://").concat(e,":").concat(n),i&&((0,a.pingServer)(r.emulatorOrigin+"/backends"),(0,a.updateEmulatorBanner)("Functions",!0))}function S(t,e,n){var r=(0,a.getModularInstance)(t);let i=t=>(function(t,e,n,r){let i=t._url(e);return b(t,i,n,r)})(r,e,t,n||{});return i.stream=(t,n)=>(function(t,e,n,r){let i=t._url(e);return P(t,i,n,r||{})})(r,e,t,n),i}(0,o._registerComponent)(new s.Component(h,(t,e)=>{let{instanceIdentifier:n}=e,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new y(r,i,t.getProvider("messaging-internal"),t.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(E,T,void 0),(0,o.registerVersion)(E,T,"esm2020");let D=(0,e.getApps)().length?(0,e.getApp)():(0,e.initializeApp)({apiKey:"AIzaSyDYQfltkDCGJvCgtgCNzVfyA5nUJy5KNNc",authDomain:"chamama-addfd.firebaseapp.com",projectId:"chamama-addfd",storageBucket:"chamama-addfd.firebasestorage.app",appId:"1:542858138442:web:abe34a5d9cccf70af5e7b3"}),O=(0,n.getAuth)(D),A=(0,r.getFirestore)(D),N=(0,i.getStorage)(D),R=k(D,"us-central1");"localhost"===location.hostname&&((0,n.connectAuthEmulator)(O,"http://127.0.0.1:9099"),(0,r.connectFirestoreEmulator)(A,"127.0.0.1",8080),(0,i.connectStorageEmulator)(N,"127.0.0.1",9199),C(R,"127.0.0.1",5001))},32189,(t,e,n)=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},65156,(t,e,n)=>{"use strict";var r=t.r(32189);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45009,(t,e,n)=>{e.exports=t.r(65156)()},76611,(t,e,n)=>{t.e,e.exports=function(){var t=[function(t,e){"use strict";function n(t,e,n,r){return({red:r[4*(n*e+t)],green:r[4*(n*e+t)+1],blue:r[4*(n*e+t)+2],alpha:r[4*(n*e+t)+3]}).alpha}function r(t,e,r,i){for(var o=t?1:-1,a=t?0:r-1,s=a;t?s<r:s>-1;s+=o)for(var c=0;c<e;c++)if(n(c,s,e,i))return s;return null}function i(t,e,r,i){for(var o=t?1:-1,a=t?0:e-1,s=a;t?s<e:s>-1;s+=o)for(var c=0;c<r;c++)if(n(s,c,e,i))return s;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.getContext("2d"),n=t.width,o=t.height,a=e.getImageData(0,0,n,o).data,s=r(!0,n,o,a),c=r(!1,n,o,a),l=i(!0,n,o,a),u=i(!1,n,o,a)-l+1,h=c-s+1,d=e.getImageData(l,s,u,h);return t.width=u,t.height=h,e.clearRect(0,0,u,h),e.putImageData(d,0,0),t}}];function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}()},28957,t=>{"use strict";t.s(["default",()=>m],28957);var e=t.i(43476),n=t.i(71645);function r(){return(r=Object.assign.bind()).apply(null,arguments)}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(s=function(){return!!t})()}var c=t.i(45009);function l(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}function u(t,e,n,r){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=r}function h(t,e){var n,r,i,o,a,s,c,l,u,d=this,p=e||{};(this.velocityFilterWeight=p.velocityFilterWeight||.7,this.minWidth=p.minWidth||.5,this.maxWidth=p.maxWidth||2.5,this.throttle="throttle"in p?p.throttle:16,this.minDistance="minDistance"in p?p.minDistance:5,this.throttle)?this._strokeMoveUpdate=(n=h.prototype._strokeUpdate,r=this.throttle,c=null,l=0,i||(i={}),u=function(){l=!1===i.leading?0:Date.now(),c=null,s=n.apply(o,a),c||(o=a=null)},function(){var t=Date.now();l||!1!==i.leading||(l=t);var e=r-(t-l);return o=this,a=arguments,e<=0||e>r?(c&&(clearTimeout(c),c=null),l=t,s=n.apply(o,a),c||(o=a=null)):c||!1===i.trailing||(c=setTimeout(u,e)),s}):this._strokeMoveUpdate=h.prototype._strokeUpdate,this.dotSize=p.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=p.penColor||"black",this.backgroundColor=p.backgroundColor||"rgba(0,0,0,0)",this.onBegin=p.onBegin,this.onEnd=p.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(d._mouseButtonDown=!0,d._strokeBegin(t))},this._handleMouseMove=function(t){d._mouseButtonDown&&d._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&d._mouseButtonDown&&(d._mouseButtonDown=!1,d._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];d._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];d._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===d._canvas&&(t.preventDefault(),d._strokeEnd(t))},this.on()}l.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},l.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},l.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},u.prototype.length=function(){for(var t=0,e=void 0,n=void 0,r=0;r<=10;r+=1){var i=r/10,o=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var s=o-e,c=a-n;t+=Math.sqrt(s*s+c*c)}e=o,n=a}return t},u.prototype._point=function(t,e,n,r,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+i*t*t*t},h.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},h.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,i=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/i,a=n.height||this._canvas.height/i;this._reset(),r.src=t,r.onload=function(){e._ctx.drawImage(r,0,0,o,a)},this._isEmpty=!1},h.prototype.toDataURL=function(t){var e;if("image/svg+xml"===t)return this._toSVG();for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this._canvas).toDataURL.apply(e,[t].concat(r))},h.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},h.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},h.prototype.isEmpty=function(){return this._isEmpty},h.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},h.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,r=this._createPoint(e,n),i=this._data[this._data.length-1],o=i&&i[i.length-1],a=o&&r.distanceTo(o)<this.minDistance;if(!(o&&a)){var s=this._addPoint(r),c=s.curve,l=s.widths;c&&l&&this._drawCurve(c,l.start,l.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},h.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],i=r[r.length-1];n.equals(i)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},h.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},h.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},h.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},h.prototype._createPoint=function(t,e,n){var r=this._canvas.getBoundingClientRect();return new l(t-r.left,e-r.top,n||new Date().getTime())},h.prototype._addPoint=function(t){var e=this.points;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var n=this._calculateCurveControlPoints(e[0],e[1],e[2]).c2,r=this._calculateCurveControlPoints(e[1],e[2],e[3]).c1,i=new u(e[1],n,r,e[2]),o=this._calculateCurveWidths(i);return e.shift(),{curve:i,widths:o}}return{}},h.prototype._calculateCurveControlPoints=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=e.x-n.x,a=e.y-n.y,s={x:(t.x+e.x)/2,y:(t.y+e.y)/2},c={x:(e.x+n.x)/2,y:(e.y+n.y)/2},u=Math.sqrt(r*r+i*i),h=Math.sqrt(o*o+a*a),d=s.x-c.x,p=s.y-c.y,f=h/(u+h),m={x:c.x+d*f,y:c.y+p*f},g=e.x-m.x,v=e.y-m.y;return{c1:new l(s.x+g,s.y+v),c2:new l(c.x+g,c.y+v)}},h.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,r={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i);return r.start=this._lastWidth,r.end=o,this._lastVelocity=i,this._lastWidth=o,r},h.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},h.prototype._drawPoint=function(t,e,n){var r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},h.prototype._drawCurve=function(t,e,n){var r=this._ctx,i=n-e,o=Math.floor(t.length());r.beginPath();for(var a=0;a<o;a+=1){var s=a/o,c=s*s,l=c*s,u=1-s,h=u*u,d=h*u,p=d*t.startPoint.x;p+=3*h*s*t.control1.x+3*u*c*t.control2.x+l*t.endPoint.x;var f=d*t.startPoint.y;f+=3*h*s*t.control1.y+3*u*c*t.control2.y+l*t.endPoint.y;var m=e+l*i;this._drawPoint(p,f,m)}r.closePath(),r.fill()},h.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},h.prototype._fromData=function(t,e,n){for(var r=0;r<t.length;r+=1){var i=t[r];if(i.length>1)for(var o=0;o<i.length;o+=1){var a=i[o],s=new l(a.x,a.y,a.time),c=a.color;if(0===o)this.penColor=c,this._reset(),this._addPoint(s);else if(o!==i.length-1){var u=this._addPoint(s),h=u.curve,d=u.widths;h&&d&&e(h,d,c)}}else this._reset(),n(i[0])}},h.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),i=n.width/r,o=n.height/r,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"width",n.width),a.setAttributeNS(null,"height",n.height),this._fromData(e,function(t,e,n){var r=document.createElement("path");if(!isNaN(t.control1.x)&&!isNaN(t.control1.y)&&!isNaN(t.control2.x)&&!isNaN(t.control2.y)){var i="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" "+("C "+t.control1.x.toFixed(3)+",")+t.control1.y.toFixed(3)+" "+(t.control2.x.toFixed(3)+",")+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);r.setAttribute("d",i),r.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),r.setAttribute("stroke",n),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),a.appendChild(r)}},function(e){var n=document.createElement("circle"),r="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",r),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),a.appendChild(n)});var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="0 0 '+i+" ")+o+'" width="'+i+'" height="'+o+'">',c=a.innerHTML;if(void 0===c){var l=document.createElement("dummy"),u=a.childNodes;l.innerHTML="";for(var h=0;h<u.length;h+=1)l.appendChild(u[h].cloneNode(!0));c=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+c+"</svg>")},h.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t,n){return e._drawCurve(t,n.start,n.end)},function(t){return e._drawDot(t)}),this._data=t},h.prototype.toData=function(){return this._data};var d=t.i(76611),p=["canvasProps","clearOnResize"],f=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");l.prototype=Object.create(t&&t.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),t&&o(l,t);var e,c=(e=s(),function(){var t,n=a(l);t=e?Reflect.construct(n,arguments,a(this).constructor):n.apply(this,arguments);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return this});function l(){var t;if(!(this instanceof l))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=c.call.apply(c,[this].concat(i))).staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(e){t._canvas=e,null===t._canvas&&(t._sigPad=null)},t._excludeOurProps=function(){var e=t.props;return e.canvasProps,e.clearOnResize,function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],-1===e.indexOf(n)&&({}).propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,p)},t.componentDidMount=function(){var e=t.getCanvas();t._sigPad=new h(e,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(null===t._canvas)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var e=t.getCanvas(),n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0),(0,d.default)(n)},t.getSignaturePad=function(){if(null===t._sigPad)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var e,n,r=null!=(e=t.props.canvasProps)?e:{},i=r.width,o=r.height;if(void 0===i||void 0===o){var a=t.getCanvas(),s=Math.max(null!=(n=window.devicePixelRatio)?n:1,1);void 0===i&&(a.width=a.offsetWidth*s),void 0===o&&(a.height=a.offsetHeight*s),a.getContext("2d").scale(s,s),t.clear()}},t.render=function(){var e=t.props.canvasProps;return n.default.createElement("canvas",r({ref:t.setRef},e))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(e,n){return t.getSignaturePad().fromDataURL(e,n)},t.toDataURL=function(e,n){return t.getSignaturePad().toDataURL(e,n)},t.fromData=function(e){return t.getSignaturePad().fromData(e)},t.toData=function(){return t.getSignaturePad().toData()},t}return Object.defineProperty(l,"prototype",{writable:!1}),l}(n.Component);function m(t){let{onChange:r}=t,i=(0,n.useRef)(null);return(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(f,{ref:i,penColor:"black",onEnd:function(){try{var t;let e=null==(t=i.current)?void 0:t.toDataURL("image/png");e&&"function"==typeof r&&r(e)}catch(t){console.error("Signature toDataURL failed:",t)}},canvasProps:{width:500,height:180,className:"border rounded"}}),(0,e.jsx)("div",{className:"flex gap-2",children:(0,e.jsx)("button",{type:"button",onClick:function(){try{var t;null==(t=i.current)||t.clear()}finally{"function"==typeof r&&r("")}},className:"border p-2",children:"נקה"})})]})}f.propTypes={velocityFilterWeight:c.default.number,minWidth:c.default.number,maxWidth:c.default.number,minDistance:c.default.number,dotSize:c.default.oneOfType([c.default.number,c.default.func]),penColor:c.default.string,throttle:c.default.number,onEnd:c.default.func,onBegin:c.default.func,canvasProps:c.default.object,clearOnResize:c.default.bool},f.defaultProps={clearOnResize:!0},f.refNullError=Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.")},6654,t=>{"use strict";t.s(["default",()=>c],6654);var e=t.i(43476),n=t.i(71645),r=t.i(28957),i=t.i(11663);t.i(51718);var o=t.i(18357);t.i(61086);var a=t.i(27215);async function s(t,e){let n="signatures/".concat(t,"/").concat(Date.now(),".png"),r=(0,a.ref)(i.storage,n);return await (0,a.uploadString)(r,e,"data_url"),{url:await (0,a.getDownloadURL)(r),path:n}}function c(){let[t,a]=(0,n.useState)(null),[c,l]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[d,p]=(0,n.useState)("");async function f(e){if(t){h(""),l(!0);try{let{url:n}=await s(t.uid,e);p(n),h("✅ נשמר ב-Storage")}catch(t){h("שגיאה: "+((null==t?void 0:t.message)||t))}finally{l(!1)}}}return(0,n.useEffect)(()=>{let t=(0,o.onAuthStateChanged)(i.auth,t=>{a(t),t||(location.href="/login")});return()=>t()},[]),(0,e.jsxs)("main",{dir:"rtl",className:"p-6 max-w-xl mx-auto",children:[(0,e.jsx)("h1",{className:"text-2xl mb-4",children:"דמו שמירת חתימה"}),(0,e.jsx)(r.default,{onSave:f}),(0,e.jsx)("div",{className:"mt-3 text-sm",children:c?"שומר...":u}),d&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("a",{className:"text-blue-600 underline",href:d,target:"_blank",children:"פתח קובץ"}),(0,e.jsx)("div",{className:"border mt-2 p-2",children:(0,e.jsx)("img",{src:d,alt:"חתימה",className:"max-w-full"})})]})]})}}]);