(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(t,e,n)=>{e.exports=t.r(76562)},11663,52831,61978,t=>{"use strict";t.s(["auth",()=>j,"db",()=>D,"functions",()=>A,"storage",()=>O],11663),t.i(47167),t.i(14539);var e=t.i(76510);t.i(51718);var n=t.i(18357);t.i(36180);var r=t.i(98925);t.i(61086);var i=t.i(27215);t.s([],61978),t.s(["connectFunctionsEmulator",()=>T,"getFunctions",()=>E,"httpsCallable",()=>N],52831);var a=t.i(92953),o=t.i(97427),s=t.i(8070);function l(t,e){let n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function c(t){if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t)||!0===t||!1===t||"[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(t=>c(t));if("function"==typeof t||"object"==typeof t)return l(t,t=>c(t));throw Error("Data cannot be encoded in JSON: "+t)}function u(t){if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{let e=Number(t.value);if(isNaN(e))throw Error("Data cannot be decoded from JSON: "+t);return e}default:throw Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(t=>u(t)):"function"==typeof t||"object"==typeof t?l(t,t=>u(t)):t}let d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class p extends o.FirebaseError{constructor(t,e,n){super("".concat(d,"/").concat(t),e||""),this.details=n,Object.setPrototypeOf(this,p.prototype)}}function f(t,e){let n,r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r;try{let t=e&&e.error;if(t){let e=t.status;if("string"==typeof e){if(!h[e])return new p("internal","internal");r=h[e],i=e}let a=t.message;"string"==typeof a&&(i=a),n=t.details,void 0!==n&&(n=u(n))}}catch(t){}return"ok"===r?null:new p(r,i,n)}class m{async getAuthToken(){if(this.auth)try{let t=await this.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(t){return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){let e=await this.getAuthToken();return{authToken:e,messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(t)}}constructor(t,e,n,r){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,a._isFirebaseServerApp)(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(t=>this.auth=t,()=>{}),this.messaging||n.get().then(t=>this.messaging=t,()=>{}),this.appCheck||null==r||r.get().then(t=>this.appCheck=t,()=>{})}}let v="us-central1",g=/^data: (.*?)(?:\n|$)/;class y{_delete(){return this.deleteService()}_url(t){let e=this.app.options.projectId;if(null!==this.emulatorOrigin){let n=this.emulatorOrigin;return"".concat(n,"/").concat(e,"/").concat(this.region,"/").concat(t)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(t):"https://".concat(this.region,"-").concat(e,".cloudfunctions.net/").concat(t)}constructor(t,e,n,r,i=v,a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return fetch(...e)}){this.app=t,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new m(t,e,n,r),this.cancelAllRequests=new Promise(t=>{this.deleteService=()=>Promise.resolve(t())});try{let t=new URL(i);this.customDomain=t.origin+("/"===t.pathname?"":t.pathname),this.region=v}catch(t){this.customDomain=null,this.region=i}}}function x(t){return t.emulatorOrigin&&(0,o.isCloudWorkstation)(t.emulatorOrigin)?"include":void 0}async function _(t,e,n,r,i){let a;n["Content-Type"]="application/json";try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:x(i)})}catch(t){return{status:0,json:null}}let o=null;try{o=await a.json()}catch(t){}return{status:a.status,json:o}}async function w(t,e){let n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function b(t,e,n,r){var i;let a,o={data:n=c(n)},s=await w(t,r),l=(i=r.timeout||7e4,a=null,{promise:new Promise((t,e)=>{a=setTimeout(()=>{e(new p("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{a&&clearTimeout(a)}}),d=await Promise.race([_(e,o,s,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!d)throw new p("cancelled","Firebase Functions instance was deleted.");let h=f(d.status,d.json);if(h)throw h;if(!d.json)throw new p("internal","Response is not valid JSON object.");let m=d.json.data;if(void 0===m&&(m=d.json.result),void 0===m)throw new p("internal","Response is missing data field.");return{data:u(m)}}async function P(t,e,n,r){var i;let a,o,s,l={data:n=c(n)},d=await w(t,r);d["Content-Type"]="application/json",d.Accept="text/event-stream";try{a=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:d,signal:null==r?void 0:r.signal,credentials:x(t)})}catch(e){if(e instanceof Error&&"AbortError"===e.name){let t=new p("cancelled","Request was cancelled.");return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}let t=f(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}let h=new Promise((t,e)=>{o=t,s=e});null==r||null==(i=r.signal)||i.addEventListener("abort",()=>{let t=new p("cancelled","Request was cancelled.");s(t)});let m=function(t,e,n,r){let i=(t,r)=>{let i=t.match(g);if(!i)return;let a=i[1];try{let t=JSON.parse(a);if("result"in t)return void e(u(t.result));if("message"in t)return void r.enqueue(u(t.message));if("error"in t){let e=f(0,t);r.error(e),n(e);return}}catch(t){if(t instanceof p){r.error(t),n(t);return}}},a=new TextDecoder;return new ReadableStream({start(e){let o="";return s();async function s(){if(null==r?void 0:r.aborted){let t=new p("cancelled","Request was cancelled");return e.error(t),n(t),Promise.resolve()}try{let{value:l,done:c}=await t.read();if(c){o.trim()&&i(o.trim(),e),e.close();return}if(null==r?void 0:r.aborted){let r=new p("cancelled","Request was cancelled");e.error(r),n(r),await t.cancel();return}let u=(o+=a.decode(l,{stream:!0})).split("\n");for(let t of(o=u.pop()||"",u))t.trim()&&i(t.trim(),e);return s()}catch(r){let t=r instanceof p?r:f(0,null);e.error(t),n(t)}}},cancel:()=>t.cancel()})}(a.body.getReader(),o,s,null==r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){let t=m.getReader();return{async next(){let{value:e,done:n}=await t.read();return{value:e,done:n}},return:async()=>(await t.cancel(),{done:!0,value:void 0})}}},data:h}}let k="@firebase/functions",C="0.13.1";function E(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.getApp)(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=(0,a._getProvider)((0,o.getModularInstance)(t),d).getImmediate({identifier:e}),r=(0,o.getDefaultEmulatorHostnameAndPort)("functions");return r&&T(n,...r),n}function T(t,e,n){var r=(0,o.getModularInstance)(t);let i=(0,o.isCloudWorkstation)(e);r.emulatorOrigin="http".concat(i?"s":"","://").concat(e,":").concat(n),i&&((0,o.pingServer)(r.emulatorOrigin+"/backends"),(0,o.updateEmulatorBanner)("Functions",!0))}function N(t,e,n){var r=(0,o.getModularInstance)(t);let i=t=>(function(t,e,n,r){let i=t._url(e);return b(t,i,n,r)})(r,e,t,n||{});return i.stream=(t,n)=>(function(t,e,n,r){let i=t._url(e);return P(t,i,n,r||{})})(r,e,t,n),i}(0,a._registerComponent)(new s.Component(d,(t,e)=>{let{instanceIdentifier:n}=e,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new y(r,i,t.getProvider("messaging-internal"),t.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),(0,a.registerVersion)(k,C,void 0),(0,a.registerVersion)(k,C,"esm2020");let S=(0,e.getApps)().length?(0,e.getApp)():(0,e.initializeApp)({apiKey:"AIzaSyDYQfltkDCGJvCgtgCNzVfyA5nUJy5KNNc",authDomain:"chamama-addfd.firebaseapp.com",projectId:"chamama-addfd",storageBucket:"chamama-addfd.firebasestorage.app",appId:"1:542858138442:web:abe34a5d9cccf70af5e7b3"}),j=(0,n.getAuth)(S),D=(0,r.getFirestore)(S),O=(0,i.getStorage)(S),A=E(S,"us-central1");"localhost"===location.hostname&&((0,n.connectAuthEmulator)(j,"http://127.0.0.1:9099"),(0,r.connectFirestoreEmulator)(D,"127.0.0.1",8080),(0,i.connectStorageEmulator)(O,"127.0.0.1",9199),T(A,"127.0.0.1",5001))},32189,(t,e,n)=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},65156,(t,e,n)=>{"use strict";var r=t.r(32189);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},45009,(t,e,n)=>{e.exports=t.r(65156)()},76611,(t,e,n)=>{t.e,e.exports=function(){var t=[function(t,e){"use strict";function n(t,e,n,r){return({red:r[4*(n*e+t)],green:r[4*(n*e+t)+1],blue:r[4*(n*e+t)+2],alpha:r[4*(n*e+t)+3]}).alpha}function r(t,e,r,i){for(var a=t?1:-1,o=t?0:r-1,s=o;t?s<r:s>-1;s+=a)for(var l=0;l<e;l++)if(n(l,s,e,i))return s;return null}function i(t,e,r,i){for(var a=t?1:-1,o=t?0:e-1,s=o;t?s<e:s>-1;s+=a)for(var l=0;l<r;l++)if(n(s,l,e,i))return s;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.getContext("2d"),n=t.width,a=t.height,o=e.getImageData(0,0,n,a).data,s=r(!0,n,a,o),l=r(!1,n,a,o),c=i(!0,n,a,o),u=i(!1,n,a,o)-c+1,d=l-s+1,h=e.getImageData(c,s,u,d);return t.width=u,t.height=d,e.clearRect(0,0,u,d),e.putImageData(h,0,0),t}}];function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}()},28957,t=>{"use strict";t.s(["default",()=>m],28957);var e=t.i(43476),n=t.i(71645);function r(){return(r=Object.assign.bind()).apply(null,arguments)}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(s=function(){return!!t})()}var l=t.i(45009);function c(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}function u(t,e,n,r){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=r}function d(t,e){var n,r,i,a,o,s,l,c,u,h=this,p=e||{};(this.velocityFilterWeight=p.velocityFilterWeight||.7,this.minWidth=p.minWidth||.5,this.maxWidth=p.maxWidth||2.5,this.throttle="throttle"in p?p.throttle:16,this.minDistance="minDistance"in p?p.minDistance:5,this.throttle)?this._strokeMoveUpdate=(n=d.prototype._strokeUpdate,r=this.throttle,l=null,c=0,i||(i={}),u=function(){c=!1===i.leading?0:Date.now(),l=null,s=n.apply(a,o),l||(a=o=null)},function(){var t=Date.now();c||!1!==i.leading||(c=t);var e=r-(t-c);return a=this,o=arguments,e<=0||e>r?(l&&(clearTimeout(l),l=null),c=t,s=n.apply(a,o),l||(a=o=null)):l||!1===i.trailing||(l=setTimeout(u,e)),s}):this._strokeMoveUpdate=d.prototype._strokeUpdate,this.dotSize=p.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=p.penColor||"black",this.backgroundColor=p.backgroundColor||"rgba(0,0,0,0)",this.onBegin=p.onBegin,this.onEnd=p.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(h._mouseButtonDown=!0,h._strokeBegin(t))},this._handleMouseMove=function(t){h._mouseButtonDown&&h._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&h._mouseButtonDown&&(h._mouseButtonDown=!1,h._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];h._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];h._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===h._canvas&&(t.preventDefault(),h._strokeEnd(t))},this.on()}c.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},c.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},c.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},u.prototype.length=function(){for(var t=0,e=void 0,n=void 0,r=0;r<=10;r+=1){var i=r/10,a=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var s=a-e,l=o-n;t+=Math.sqrt(s*s+l*l)}e=a,n=o}return t},u.prototype._point=function(t,e,n,r,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+i*t*t*t},d.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},d.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,i=n.ratio||window.devicePixelRatio||1,a=n.width||this._canvas.width/i,o=n.height||this._canvas.height/i;this._reset(),r.src=t,r.onload=function(){e._ctx.drawImage(r,0,0,a,o)},this._isEmpty=!1},d.prototype.toDataURL=function(t){var e;if("image/svg+xml"===t)return this._toSVG();for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this._canvas).toDataURL.apply(e,[t].concat(r))},d.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},d.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},d.prototype.isEmpty=function(){return this._isEmpty},d.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},d.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,r=this._createPoint(e,n),i=this._data[this._data.length-1],a=i&&i[i.length-1],o=a&&r.distanceTo(a)<this.minDistance;if(!(a&&o)){var s=this._addPoint(r),l=s.curve,c=s.widths;l&&c&&this._drawCurve(l,c.start,c.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},d.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],i=r[r.length-1];n.equals(i)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},d.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},d.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},d.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},d.prototype._createPoint=function(t,e,n){var r=this._canvas.getBoundingClientRect();return new c(t-r.left,e-r.top,n||new Date().getTime())},d.prototype._addPoint=function(t){var e=this.points;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var n=this._calculateCurveControlPoints(e[0],e[1],e[2]).c2,r=this._calculateCurveControlPoints(e[1],e[2],e[3]).c1,i=new u(e[1],n,r,e[2]),a=this._calculateCurveWidths(i);return e.shift(),{curve:i,widths:a}}return{}},d.prototype._calculateCurveControlPoints=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,a=e.x-n.x,o=e.y-n.y,s={x:(t.x+e.x)/2,y:(t.y+e.y)/2},l={x:(e.x+n.x)/2,y:(e.y+n.y)/2},u=Math.sqrt(r*r+i*i),d=Math.sqrt(a*a+o*o),h=s.x-l.x,p=s.y-l.y,f=d/(u+d),m={x:l.x+h*f,y:l.y+p*f},v=e.x-m.x,g=e.y-m.y;return{c1:new c(s.x+v,s.y+g),c2:new c(l.x+v,l.y+g)}},d.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,r={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(i);return r.start=this._lastWidth,r.end=a,this._lastVelocity=i,this._lastWidth=a,r},d.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},d.prototype._drawPoint=function(t,e,n){var r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},d.prototype._drawCurve=function(t,e,n){var r=this._ctx,i=n-e,a=Math.floor(t.length());r.beginPath();for(var o=0;o<a;o+=1){var s=o/a,l=s*s,c=l*s,u=1-s,d=u*u,h=d*u,p=h*t.startPoint.x;p+=3*d*s*t.control1.x+3*u*l*t.control2.x+c*t.endPoint.x;var f=h*t.startPoint.y;f+=3*d*s*t.control1.y+3*u*l*t.control2.y+c*t.endPoint.y;var m=e+c*i;this._drawPoint(p,f,m)}r.closePath(),r.fill()},d.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},d.prototype._fromData=function(t,e,n){for(var r=0;r<t.length;r+=1){var i=t[r];if(i.length>1)for(var a=0;a<i.length;a+=1){var o=i[a],s=new c(o.x,o.y,o.time),l=o.color;if(0===a)this.penColor=l,this._reset(),this._addPoint(s);else if(a!==i.length-1){var u=this._addPoint(s),d=u.curve,h=u.widths;d&&h&&e(d,h,l)}}else this._reset(),n(i[0])}},d.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),i=n.width/r,a=n.height/r,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"width",n.width),o.setAttributeNS(null,"height",n.height),this._fromData(e,function(t,e,n){var r=document.createElement("path");if(!isNaN(t.control1.x)&&!isNaN(t.control1.y)&&!isNaN(t.control2.x)&&!isNaN(t.control2.y)){var i="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" "+("C "+t.control1.x.toFixed(3)+",")+t.control1.y.toFixed(3)+" "+(t.control2.x.toFixed(3)+",")+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);r.setAttribute("d",i),r.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),r.setAttribute("stroke",n),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),o.appendChild(r)}},function(e){var n=document.createElement("circle"),r="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",r),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),o.appendChild(n)});var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="0 0 '+i+" ")+a+'" width="'+i+'" height="'+a+'">',l=o.innerHTML;if(void 0===l){var c=document.createElement("dummy"),u=o.childNodes;c.innerHTML="";for(var d=0;d<u.length;d+=1)c.appendChild(u[d].cloneNode(!0));l=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+l+"</svg>")},d.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t,n){return e._drawCurve(t,n.start,n.end)},function(t){return e._drawDot(t)}),this._data=t},d.prototype.toData=function(){return this._data};var h=t.i(76611),p=["canvasProps","clearOnResize"],f=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");c.prototype=Object.create(t&&t.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),t&&a(c,t);var e,l=(e=s(),function(){var t,n=o(c);t=e?Reflect.construct(n,arguments,o(this).constructor):n.apply(this,arguments);if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===this)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return this});function c(){var t;if(!(this instanceof c))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];return(t=l.call.apply(l,[this].concat(i))).staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(e){t._canvas=e,null===t._canvas&&(t._sigPad=null)},t._excludeOurProps=function(){var e=t.props;return e.canvasProps,e.clearOnResize,function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&({}).propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,p)},t.componentDidMount=function(){var e=t.getCanvas();t._sigPad=new d(e,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(null===t._canvas)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var e=t.getCanvas(),n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0),(0,h.default)(n)},t.getSignaturePad=function(){if(null===t._sigPad)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var e,n,r=null!=(e=t.props.canvasProps)?e:{},i=r.width,a=r.height;if(void 0===i||void 0===a){var o=t.getCanvas(),s=Math.max(null!=(n=window.devicePixelRatio)?n:1,1);void 0===i&&(o.width=o.offsetWidth*s),void 0===a&&(o.height=o.offsetHeight*s),o.getContext("2d").scale(s,s),t.clear()}},t.render=function(){var e=t.props.canvasProps;return n.default.createElement("canvas",r({ref:t.setRef},e))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(e,n){return t.getSignaturePad().fromDataURL(e,n)},t.toDataURL=function(e,n){return t.getSignaturePad().toDataURL(e,n)},t.fromData=function(e){return t.getSignaturePad().fromData(e)},t.toData=function(){return t.getSignaturePad().toData()},t}return Object.defineProperty(c,"prototype",{writable:!1}),c}(n.Component);function m(t){let{onChange:r}=t,i=(0,n.useRef)(null);return(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(f,{ref:i,penColor:"black",onEnd:function(){try{var t;let e=null==(t=i.current)?void 0:t.toDataURL("image/png");e&&"function"==typeof r&&r(e)}catch(t){console.error("Signature toDataURL failed:",t)}},canvasProps:{width:500,height:180,className:"border rounded"}}),(0,e.jsx)("div",{className:"flex gap-2",children:(0,e.jsx)("button",{type:"button",onClick:function(){try{var t;null==(t=i.current)||t.clear()}finally{"function"==typeof r&&r("")}},className:"border p-2",children:"נקה"})})]})}f.propTypes={velocityFilterWeight:l.default.number,minWidth:l.default.number,maxWidth:l.default.number,minDistance:l.default.number,dotSize:l.default.oneOfType([l.default.number,l.default.func]),penColor:l.default.string,throttle:l.default.number,onEnd:l.default.func,onBegin:l.default.func,canvasProps:l.default.object,clearOnResize:l.default.bool},f.defaultProps={clearOnResize:!0},f.refNullError=Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.")},61977,t=>{"use strict";t.s(["default",()=>c],61977);var e=t.i(43476),n=t.i(71645),r=t.i(18566),i=t.i(11663);t.i(36180);var a=t.i(98925);t.i(61978);var o=t.i(52831);let s=["ברקן","גרניום","דוריאן","הל"];var l=t.i(28957);function c(){let{id:t}=(0,r.useParams)(),c=(0,r.useRouter)(),[u,d]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),[f,m]=(0,n.useState)([]),[v,g]=(0,n.useState)(""),[y,x]=(0,n.useState)({studentName:"",group:""}),[_,w]=(0,n.useState)(null),[b,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{d(!0);try{let e=(await (0,a.getDoc)((0,a.doc)(i.db,"forms",t))).data()||{};p(e),m(e.schema||[])}finally{d(!1)}})()},[t]);let k=(0,n.useMemo)(()=>{var t;return null==(t=f.find(t=>"phone"===t.type))?void 0:t.id},[f]),C=(0,n.useMemo)(()=>{var t;return null==(t=f.find(t=>"email"===t.type))?void 0:t.id},[f]);function E(t,e){x(n=>({...n,[t]:e}))}async function T(e){var n;if(e.preventDefault(),g(""),!(null==(n=y.studentName)?void 0:n.trim()))return g("נא למלא את שם החניכ.ה");if(!y.group)return g("נא לבחור קבוצה");if(C&&y[C]&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(y[C])))return g("כתובת אימייל לא תקינה");if(k&&y[k]&&!/^[0-9+\-\s()]{7,}$/.test(String(y[k])))return g("מספר טלפון לא תקין");if(f.filter(t=>t.required).some(t=>{let e=y[t.id];return"checkbox"===t.type?!Array.isArray(e)||0===e.length:"consent"===t.type?!0!==e:null==e||""===String(e).trim()}))return g("יש למלא את כל השדות המסומנים כחובה");try{P(!0);let e=(0,o.httpsCallable)(i.functions,"submitFormToDrive");await e({formId:t,answers:y,signatureDataUrl:_||null}),c.replace("/f/".concat(t,"/thanks"))}catch(t){console.error(t),g((null==t?void 0:t.message)||(null==t?void 0:t.code)||"אירעה שגיאה בשליחה")}finally{P(!1)}}return u?(0,e.jsx)("main",{dir:"rtl",className:"p-6 max-w-3xl mx-auto",children:"טוען…"}):h?(0,e.jsxs)("main",{dir:"rtl",className:"p-6 max-w-3xl mx-auto",children:[(0,e.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:h.title||"טופס"}),h.descriptionHtml&&(0,e.jsx)("div",{className:"prose prose-sm max-w-none mb-6",dangerouslySetInnerHTML:{__html:h.descriptionHtml}}),(0,e.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,e.jsxs)("div",{className:"border rounded p-3 bg-white",children:[(0,e.jsxs)("div",{className:"text-sm mb-1",children:["שם החניכ.ה ",(0,e.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,e.jsx)("input",{className:"border p-2 w-full rounded",value:y.studentName||"",onChange:t=>E("studentName",t.target.value),required:!0})]}),(0,e.jsxs)("div",{className:"border rounded p-3 bg-white",children:[(0,e.jsxs)("div",{className:"text-sm mb-1",children:["קבוצה בחממה ",(0,e.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,e.jsxs)("select",{className:"border p-2 w-full rounded",value:y.group||"",onChange:t=>E("group",t.target.value),required:!0,children:[(0,e.jsx)("option",{value:"",children:"בחר/י קבוצה…"}),s.map(t=>(0,e.jsx)("option",{value:t,children:t},t))]})]}),f.map(t=>{var n;return(0,e.jsxs)("div",{className:"border rounded p-3 bg-white",children:[(0,e.jsxs)("div",{className:"text-sm mb-1",children:[t.label," ",t.required&&(0,e.jsx)("span",{className:"text-red-600",children:"*"})]}),"text"===t.type&&(0,e.jsx)("input",{className:"border p-2 w-full rounded",value:y[t.id]||"",onChange:e=>E(t.id,e.target.value),required:t.required}),"textarea"===t.type&&(0,e.jsx)("textarea",{className:"border p-2 w-full rounded",value:y[t.id]||"",onChange:e=>E(t.id,e.target.value),required:t.required,rows:4}),"parentName"===t.type&&(0,e.jsx)("input",{className:"border p-2 w-full rounded",value:y[t.id]||"",onChange:e=>E(t.id,e.target.value),placeholder:"שם ההורה",required:t.required}),"number"===t.type&&(0,e.jsx)("input",{type:"number",className:"border p-2 w-full rounded",value:null!=(n=y[t.id])?n:"",onChange:e=>E(t.id,e.target.value),required:t.required}),"phone"===t.type&&(0,e.jsx)("input",{type:"tel",inputMode:"tel",className:"border p-2 w-full rounded",value:y[t.id]||"",onChange:e=>E(t.id,e.target.value),placeholder:"למשל: 050-1234567",required:t.required}),"email"===t.type&&(0,e.jsx)("input",{type:"email",className:"border p-2 w-full rounded",value:y[t.id]||"",onChange:e=>E(t.id,e.target.value),placeholder:"name@example.com",required:t.required}),"consent"===t.type&&(0,e.jsxs)("label",{className:"flex items-start gap-2",children:[(0,e.jsx)("input",{type:"checkbox",checked:!!y[t.id],onChange:e=>E(t.id,e.target.checked),required:t.required}),(0,e.jsx)("span",{className:"text-sm leading-6",children:t.description||"אני מאשר/ת..."})]}),"select"===t.type&&(0,e.jsxs)("select",{className:"border p-2 w-full rounded",value:y[t.id]||"",onChange:e=>E(t.id,e.target.value),required:t.required,children:[(0,e.jsx)("option",{value:"",children:"בחר/י…"}),(t.options||[]).map((t,n)=>(0,e.jsx)("option",{value:t,children:t},n))]}),"radio"===t.type&&(0,e.jsx)("div",{className:"flex flex-col gap-1",children:(t.options||[]).map((n,r)=>(0,e.jsxs)("label",{className:"flex items-center gap-2",children:[(0,e.jsx)("input",{type:"radio",name:t.id,checked:y[t.id]===n,onChange:()=>E(t.id,n),required:t.required&&0===r&&!y[t.id]}),(0,e.jsx)("span",{children:n})]},r))}),"checkbox"===t.type&&(0,e.jsx)("div",{className:"flex flex-col gap-1",children:(t.options||[]).map((n,r)=>{let i=Array.isArray(y[t.id])&&y[t.id].includes(n);return(0,e.jsxs)("label",{className:"flex items-center gap-2",children:[(0,e.jsx)("input",{type:"checkbox",checked:i,onChange:e=>{var r,i;return r=t.id,i=e.target.checked,void x(t=>{let e=Array.isArray(t[r])?t[r]:[],a=i?Array.from(new Set([...e,n])):e.filter(t=>t!==n);return{...t,[r]:a}})}}),(0,e.jsx)("span",{children:n})]},r)})}),"signature"===t.type&&(0,e.jsx)(l.default,{onSave:t=>w(t)})]},t.id)}),v&&(0,e.jsx)("div",{className:"text-red-600",children:v}),(0,e.jsx)("button",{type:"submit",className:"border p-2 rounded",disabled:b,children:b?"שולח…":"שלח"})]})]}):(0,e.jsx)("main",{dir:"rtl",className:"p-6 max-w-3xl mx-auto",children:"הטופס לא נמצא."})}}]);