{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/app/demo-signature/page.tsx","turbopack:///[project]/lib/saveSignaturePng.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport SignaturePad from \"@/components/SignaturePad\";\r\nimport { auth } from \"@/lib/firebaseClient\";\r\nimport { onAuthStateChanged, User } from \"firebase/auth\";\r\nimport { saveSignaturePng } from \"@/lib/saveSignaturePng\";\r\n\r\nexport default function DemoSignaturePage() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState(\"\"); const [fileUrl, setFileUrl] = useState(\"\");\r\n\r\n  useEffect(()=>{ const u = onAuthStateChanged(auth,(x)=>{ setUser(x); if(!x) location.href=\"/login\"; }); return ()=>u(); },[]);\r\n  async function handleSave(dataUrl:string){ if(!user) return; setMsg(\"\"); setSaving(true);\r\n    try{ const {url}=await saveSignaturePng(user.uid,dataUrl); setFileUrl(url); setMsg(\"✅ נשמר ב-Storage\"); }catch(e:any){ setMsg(\"שגיאה: \"+(e?.message||e)); }finally{ setSaving(false); } }\r\n\r\n  return (\r\n    <main dir=\"rtl\" className=\"p-6 max-w-xl mx-auto\">\r\n      <h1 className=\"text-2xl mb-4\">דמו שמירת חתימה</h1>\r\n      <SignaturePad onSave={handleSave}/>\r\n      <div className=\"mt-3 text-sm\">{saving ? \"שומר...\" : msg}</div>\r\n      {fileUrl && <div className=\"mt-4\"><a className=\"text-blue-600 underline\" href={fileUrl} target=\"_blank\">פתח קובץ</a><div className=\"border mt-2 p-2\"><img src={fileUrl} alt=\"חתימה\" className=\"max-w-full\"/></div></div>}\r\n    </main>\r\n  );\r\n}\r\n","// lib/saveSignaturePng.ts\r\nimport { storage } from \"@/lib/firebaseClient\";\r\nimport { ref, uploadString, getDownloadURL } from \"firebase/storage\";\r\n\r\n/** שומר dataURL של חתימה ל-Storage ומחזיר קישור הורדה */\r\nexport async function saveSignaturePng(userId: string, dataUrl: string) {\r\n  const path = `signatures/${userId}/${Date.now()}.png`;\r\n  const r = ref(storage, path);\r\n  await uploadString(r, dataUrl, \"data_url\");\r\n  const url = await getDownloadURL(r);\r\n  return { url, path };\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"0NA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,6LCD9B,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OCFA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,MAGO,eAAe,EAAiB,CAAc,CAAE,CAAe,EACpE,IAAM,EAAO,CAAC,WAAW,EAAE,EAAO,CAAC,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC,CAC/C,EAAI,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,OAAO,CAAE,GAGvB,OAFA,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAG,EAAS,YAExB,CAAE,IADG,MAAM,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,QACnB,CAAK,CACrB,CDJe,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACxC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAK,EAAO,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAAW,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAG3E,eAAe,EAAW,CAAc,EAAG,GAAI,CAAD,EAAe,EAAO,CAAf,GAAoB,GAAU,GACjF,GAAG,CAAE,GAAM,KAAC,CAAG,CAAC,CAAC,MAAM,EAAiB,EAAK,GAAG,CAAC,GAAU,EAAW,GAAM,EAAO,mBAAqB,CAAC,MAAM,EAAM,CAAE,EAAO,WAAW,CAAD,EAAI,UAAS,CAAC,CAAI,QAAQ,CAAE,GAAU,EAAQ,EAAE,CAE1L,MAJA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAAM,IAAM,EAAI,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAA,IAAI,CAAE,AAAD,IAAO,EAAQ,GAAO,AAAC,IAAG,SAAS,IAAI,CAAC,QAAA,CAAU,GAAI,MAAO,IAAI,GAAK,EAAE,EAAE,EAK1H,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,IAAI,MAAM,UAAU,iCACxB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,yBAAgB,oBAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAY,CAAA,CAAC,OAAQ,IACtB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBAAgB,EAAS,UAAY,IACnD,GAAW,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBAAO,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0BAA0B,KAAM,EAAS,OAAO,kBAAS,aAAY,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BAAkB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAS,IAAI,QAAQ,UAAU,sBAGpM","ignoreList":[0,1,2]}