{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/app/app/forms/[id]/edit/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { db } from \"@/lib/firebaseClient\";\r\nimport { doc, getDoc, updateDoc, serverTimestamp, arrayUnion } from \"firebase/firestore\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n\r\ntype Field = { id:string; type:string; label:string; options?:string[]; required?:boolean; };\r\n\r\nexport default function EditFormPage(){\r\n  const { id } = useParams<{id:string}>();\r\n  const [loading,setLoading]=useState(true);\r\n  const [title,setTitle]=useState(\"\");\r\n  const [groups,setGroups]=useState<string>(\"\");\r\n  const [emails,setEmails]=useState<string>(\"\");\r\n  const [schema,setSchema]=useState<Field[]>([]);\r\n  const router = useRouter();\r\n  const [saving, setSaving] = useState(false);\r\n\r\n\r\n  useEffect(()=>{ (async()=>{\r\n    const snap=await getDoc(doc(db,\"forms\",id)); const d=snap.data() as any;\r\n    setTitle(d?.title||\"\"); setGroups((d?.targetGroups||[]).join(\", \")); setEmails((d?.notifyStaffEmails||[]).join(\", \"));\r\n    setSchema(d?.schema||[]); setLoading(false);\r\n  })(); },[id]);\r\n\r\n  async function save() {\r\n  try {\r\n    setSaving(true);\r\n    await updateDoc(doc(db,\"forms\",id),{\r\n      title,\r\n      targetGroups: groups.split(\",\").map(s=>s.trim()).filter(Boolean),\r\n      notifyStaffEmails: emails.split(\",\").map(s=>s.trim()).filter(Boolean),\r\n      schema,\r\n      updatedAt: serverTimestamp()\r\n    });\r\n    // מעבר חזרה לרשימת הטפסים\r\n    router.replace(\"/app\");\r\n  } catch (e:any) {\r\n    alert(\"שגיאה בשמירה: \" + (e?.message || e));\r\n  } finally {\r\n    setSaving(false);\r\n  }\r\n}\r\n\r\n\r\n  function addField(type:string){\r\n    const base: Field = { id: crypto.randomUUID(), type, label: \"שדה חדש\", required:false };\r\n    if(type===\"select\"||type===\"radio\"||type===\"checkbox\"){ base.options=[\"אפשרות 1\",\"אפשרות 2\"]; }\r\n    setSchema(prev=>[...prev, base]);\r\n  }\r\n\r\n  if(loading) return <main className=\"p-6\">טוען…</main>;\r\n  return (\r\n    <main dir=\"rtl\" className=\"p-6 max-w-4xl mx-auto\">\r\n      <h1 className=\"text-2xl mb-4\">עריכת טופס</h1>\r\n\r\n      <div className=\"grid gap-3 max-w-xl\">\r\n        <input className=\"border p-2\" value={title} onChange={e=>setTitle(e.target.value)} placeholder=\"שם הטופס\" />\r\n        <input className=\"border p-2\" value={groups} onChange={e=>setGroups(e.target.value)} placeholder=\"קבוצות (מופרד בפסיקים)\" />\r\n        <input className=\"border p-2\" value={emails} onChange={e=>setEmails(e.target.value)} placeholder=\"מיילים לשליחה (מופרד בפסיקים)\" />\r\n      </div>\r\n\r\n      <div className=\"mt-6\">\r\n        <h2 className=\"text-xl mb-2\">רכיבי טופס</h2>\r\n        <div className=\"flex flex-wrap gap-2 mb-3\">\r\n          <button className=\"border p-2\" onClick={()=>addField(\"richtext\")}>טקסט עשיר</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"text\")}>שדה טקסט</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"phone\")}>טלפון</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"email\")}>דוא\"ל</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"select\")}>רשימה נגללת</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"radio\")}>בחירה אחת</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"checkbox\")}>סימונים</button>\r\n          <button className=\"border p-2\" onClick={()=>addField(\"signature\")}>חתימה</button>\r\n        </div>\r\n\r\n        <ul className=\"space-y-2\">\r\n          {schema.map(f=>(\r\n            <li key={f.id} className=\"border p-2 rounded\">\r\n              <div className=\"flex gap-2 items-center\">\r\n                <span className=\"text-xs px-2 py-1 border rounded\">{f.type}</span>\r\n                <input className=\"border p-1 flex-1\" value={f.label} onChange={e=>setSchema(s=>s.map(x=>x.id===f.id?{...x,label:e.target.value}:x))}/>\r\n                <label className=\"flex items-center gap-1 text-sm\"><input type=\"checkbox\" checked={!!f.required} onChange={e=>setSchema(s=>s.map(x=>x.id===f.id?{...x,required:e.target.checked}:x))}/> נדרש</label>\r\n                <button className=\"text-red-600\" onClick={()=>setSchema(s=>s.filter(x=>x.id!==f.id))}>מחק</button>\r\n              </div>\r\n              {(f.type===\"select\"||f.type===\"radio\"||f.type===\"checkbox\") && (\r\n                <input className=\"border p-1 mt-2 w-full\" value={(f.options||[]).join(\", \")} onChange={e=>{\r\n                  const opts=e.target.value.split(\",\").map(s=>s.trim()).filter(Boolean);\r\n                  setSchema(s=>s.map(x=>x.id===f.id?{...x,options:opts}:x));\r\n                }} placeholder=\"אפשרויות (מופרד בפסיקים)\"/>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      <button className=\"border p-2 mt-6\" onClick={save}>שמור</button>\r\n    </main>\r\n  );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}