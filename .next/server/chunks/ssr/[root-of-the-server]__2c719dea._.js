module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},92279,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(99996);a.i(69387);var f=a.i(60574);function g(){let{id:a}=(0,d.useParams)(),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)([]),q=(0,d.useRouter)(),[r,s]=(0,c.useState)(!1);async function t(){try{s(!0),await (0,f.updateDoc)((0,f.doc)(e.db,"forms",a),{title:i,targetGroups:k.split(",").map(a=>a.trim()).filter(Boolean),notifyStaffEmails:m.split(",").map(a=>a.trim()).filter(Boolean),schema:o,updatedAt:(0,f.serverTimestamp)()}),q.replace("/app")}catch(a){alert("שגיאה בשמירה: "+(a?.message||a))}finally{s(!1)}}function u(a){let b={id:crypto.randomUUID(),type:a,label:"שדה חדש",required:!1};("select"===a||"radio"===a||"checkbox"===a)&&(b.options=["אפשרות 1","אפשרות 2"]),p(a=>[...a,b])}return((0,c.useEffect)(()=>{(async()=>{let b=(await (0,f.getDoc)((0,f.doc)(e.db,"forms",a))).data();j(b?.title||""),l((b?.targetGroups||[]).join(", ")),n((b?.notifyStaffEmails||[]).join(", ")),p(b?.schema||[]),h(!1)})()},[a]),g)?(0,b.jsx)("main",{className:"p-6",children:"טוען…"}):(0,b.jsxs)("main",{dir:"rtl",className:"p-6 max-w-4xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-2xl mb-4",children:"עריכת טופס"}),(0,b.jsxs)("div",{className:"grid gap-3 max-w-xl",children:[(0,b.jsx)("input",{className:"border p-2",value:i,onChange:a=>j(a.target.value),placeholder:"שם הטופס"}),(0,b.jsx)("input",{className:"border p-2",value:k,onChange:a=>l(a.target.value),placeholder:"קבוצות (מופרד בפסיקים)"}),(0,b.jsx)("input",{className:"border p-2",value:m,onChange:a=>n(a.target.value),placeholder:"מיילים לשליחה (מופרד בפסיקים)"})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h2",{className:"text-xl mb-2",children:"רכיבי טופס"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("richtext"),children:"טקסט עשיר"}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("text"),children:"שדה טקסט"}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("phone"),children:"טלפון"}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("email"),children:'דוא"ל'}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("select"),children:"רשימה נגללת"}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("radio"),children:"בחירה אחת"}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("checkbox"),children:"סימונים"}),(0,b.jsx)("button",{className:"border p-2",onClick:()=>u("signature"),children:"חתימה"})]}),(0,b.jsx)("ul",{className:"space-y-2",children:o.map(a=>(0,b.jsxs)("li",{className:"border p-2 rounded",children:[(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("span",{className:"text-xs px-2 py-1 border rounded",children:a.type}),(0,b.jsx)("input",{className:"border p-1 flex-1",value:a.label,onChange:b=>p(c=>c.map(c=>c.id===a.id?{...c,label:b.target.value}:c))}),(0,b.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:!!a.required,onChange:b=>p(c=>c.map(c=>c.id===a.id?{...c,required:b.target.checked}:c))})," נדרש"]}),(0,b.jsx)("button",{className:"text-red-600",onClick:()=>p(b=>b.filter(b=>b.id!==a.id)),children:"מחק"})]}),("select"===a.type||"radio"===a.type||"checkbox"===a.type)&&(0,b.jsx)("input",{className:"border p-1 mt-2 w-full",value:(a.options||[]).join(", "),onChange:b=>{let c=b.target.value.split(",").map(a=>a.trim()).filter(Boolean);p(b=>b.map(b=>b.id===a.id?{...b,options:c}:b))},placeholder:"אפשרויות (מופרד בפסיקים)"})]},a.id))})]}),(0,b.jsx)("button",{className:"border p-2 mt-6",onClick:t,children:"שמור"})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2c719dea._.js.map